import type { PresetTheme, ThemeColors, ThemeSettings } from "@/types/themes";

// Font families with system fallbacks
export const FONT_FAMILIES = {
	Inter: 'Inter, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
	Roboto: 'Roboto, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',
	"Open Sans":
		'"Open Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
	Lato: 'Lato, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
	Montserrat:
		'Montserrat, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
} as const;

// Color utility functions
export const colorUtils = {
	parseHSL: (hslString: string): [number, number, number] => {
		const [h, s, l] = hslString.split(" ").map((val) => parseFloat(val));
		return [h, s, l];
	},

	formatHSL: (h: number, s: number, l: number): string => {
		return `${Math.round(h)} ${s.toFixed(1)}% ${l.toFixed(1)}%`;
	},

	adjustLightness: (hslString: string, amount: number): string => {
		const [h, s, l] = colorUtils.parseHSL(hslString);
		return colorUtils.formatHSL(
			h,
			s,
			Math.max(0, Math.min(100, l + amount)),
		);
	},

	calculateContrastRatio: (color1: string, color2: string): number => {
		const getLuminance = (hslString: string): number => {
			const [, , l] = colorUtils.parseHSL(hslString); // Only use the lightness value
			const normalizedL = l / 100;
			return normalizedL <= 0.03928
				? normalizedL / 12.92
				: ((normalizedL + 0.055) / 1.055) ** 2.4;
		};

		const l1 = getLuminance(color1);
		const l2 = getLuminance(color2);
		const lighter = Math.max(l1, l2);
		const darker = Math.min(l1, l2);
		return (lighter + 0.05) / (darker + 0.05);
	},

	isWCAGCompliant: (
		background: string,
		foreground: string,
		level: "AA" | "AAA" = "AA",
	): boolean => {
		const ratio = colorUtils.calculateContrastRatio(background, foreground);
		return level === "AA" ? ratio >= 4.5 : ratio >= 7;
	},
};

// Default theme settings
export const DEFAULT_THEME_SETTINGS: ThemeSettings = {
	radius: 0.5,
	borderWidth: 1,
	fontFamily: "Inter",
	colors: {
		light: {
			background: "0 0% 100%",
			foreground: "240 10% 3.9%",
			muted: "240 4.8% 95.9%",
			"muted-foreground": "240 3.8% 46.1%",
			popover: "0 0% 100%",
			"popover-foreground": "240 10% 3.9%",
			border: "240 5.9% 90%",
			input: "240 5.9% 90%",
			primary: "240 5.9% 10%",
			"primary-foreground": "0 0% 98%",
			secondary: "240 4.8% 95.9%",
			"secondary-foreground": "240 5.9% 10%",
			accent: "240 4.8% 95.9%",
			"accent-foreground": "240 5.9% 10%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "0 0% 98%",
			ring: "240 5% 64.9%",
		},
		dark: {
			background: "240 10% 3.9%",
			foreground: "0 0% 98%",
			muted: "240 3.7% 15.9%",
			"muted-foreground": "240 5% 64.9%",
			popover: "240 10% 3.9%",
			"popover-foreground": "0 0% 98%",
			border: "240 3.7% 15.9%",
			input: "240 3.7% 15.9%",
			primary: "0 0% 98%",
			"primary-foreground": "240 5.9% 10%",
			secondary: "240 3.7% 15.9%",
			"secondary-foreground": "0 0% 98%",
			accent: "240 3.7% 15.9%",
			"accent-foreground": "0 0% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "0 0% 98%",
			ring: "240 4.9% 83.9%",
		},
	},
} as const;

// Theme presets
export const THEME_PRESETS: Record<
	PresetTheme,
	{ light: ThemeColors; dark: ThemeColors }
> = {
	// Neutral themes
	zinc: DEFAULT_THEME_SETTINGS.colors,

	slate: {
		light: {
			background: "210 40% 98%",
			foreground: "215 25% 27%",
			muted: "210 40% 93%",
			"muted-foreground": "215 25% 27%",
			popover: "210 40% 98%",
			"popover-foreground": "215 25% 27%",
			border: "215 16% 87%",
			input: "215 16% 87%",
			primary: "215 25% 27%",
			"primary-foreground": "210 40% 98%",
			secondary: "210 40% 93%",
			"secondary-foreground": "215 25% 27%",
			accent: "210 40% 93%",
			"accent-foreground": "215 25% 27%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "210 40% 98%",
			ring: "215 25% 27%",
		},
		dark: {
			background: "215 25% 27%",
			foreground: "210 40% 98%",
			muted: "215 25% 32%",
			"muted-foreground": "210 40% 93%",
			popover: "215 25% 27%",
			"popover-foreground": "210 40% 98%",
			border: "215 25% 32%",
			input: "215 25% 32%",
			primary: "210 40% 98%",
			"primary-foreground": "215 25% 27%",
			secondary: "215 25% 32%",
			"secondary-foreground": "210 40% 98%",
			accent: "215 25% 32%",
			"accent-foreground": "210 40% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "210 40% 98%",
			ring: "210 40% 98%",
		},
	},

	stone: {
		light: {
			background: "60 9% 98%",
			foreground: "25 5% 25%",
			muted: "60 4.8% 95.9%",
			"muted-foreground": "25 3.8% 46.1%",
			popover: "60 9% 98%",
			"popover-foreground": "25 5% 25%",
			border: "25 5.9% 90%",
			input: "25 5.9% 90%",
			primary: "25 5% 25%",
			"primary-foreground": "60 9% 98%",
			secondary: "60 4.8% 95.9%",
			"secondary-foreground": "25 5% 25%",
			accent: "60 4.8% 95.9%",
			"accent-foreground": "25 5% 25%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "60 9% 98%",
			ring: "25 5% 45%",
		},
		dark: {
			background: "25 5% 15%",
			foreground: "60 9% 98%",
			muted: "25 3.7% 25.9%",
			"muted-foreground": "60 5% 64.9%",
			popover: "25 5% 15%",
			"popover-foreground": "60 9% 98%",
			border: "25 3.7% 25.9%",
			input: "25 3.7% 25.9%",
			primary: "60 9% 98%",
			"primary-foreground": "25 5% 15%",
			secondary: "25 3.7% 25.9%",
			"secondary-foreground": "60 9% 98%",
			accent: "25 3.7% 25.9%",
			"accent-foreground": "60 9% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "60 9% 98%",
			ring: "60 5.9% 83.9%",
		},
	},

	gray: {
		light: {
			background: "0 0% 100%",
			foreground: "240 10% 3.9%",
			muted: "240 4.8% 95.9%",
			"muted-foreground": "240 3.8% 46.1%",
			popover: "0 0% 100%",
			"popover-foreground": "240 10% 3.9%",
			border: "240 5.9% 90%",
			input: "240 5.9% 90%",
			primary: "240 5.9% 10%",
			"primary-foreground": "0 0% 98%",
			secondary: "240 4.8% 95.9%",
			"secondary-foreground": "240 5.9% 10%",
			accent: "240 4.8% 95.9%",
			"accent-foreground": "240 5.9% 10%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "0 0% 98%",
			ring: "240 5% 64.9%",
		},
		dark: {
			background: "240 10% 3.9%",
			foreground: "0 0% 98%",
			muted: "240 3.7% 15.9%",
			"muted-foreground": "240 5% 64.9%",
			popover: "240 10% 3.9%",
			"popover-foreground": "0 0% 98%",
			border: "240 3.7% 15.9%",
			input: "240 3.7% 15.9%",
			primary: "0 0% 98%",
			"primary-foreground": "240 5.9% 10%",
			secondary: "240 3.7% 15.9%",
			"secondary-foreground": "0 0% 98%",
			accent: "240 3.7% 15.9%",
			"accent-foreground": "0 0% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "0 0% 98%",
			ring: "240 4.9% 83.9%",
		},
	},

	neutral: {
		light: {
			background: "0 0% 100%",
			foreground: "0 0% 10%",
			muted: "0 0% 96%",
			"muted-foreground": "0 0% 45%",
			popover: "0 0% 100%",
			"popover-foreground": "0 0% 10%",
			border: "0 0% 90%",
			input: "0 0% 90%",
			primary: "0 0% 10%",
			"primary-foreground": "0 0% 98%",
			secondary: "0 0% 96%",
			"secondary-foreground": "0 0% 10%",
			accent: "0 0% 96%",
			"accent-foreground": "0 0% 10%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "0 0% 98%",
			ring: "0 0% 65%",
		},
		dark: {
			background: "0 0% 10%",
			foreground: "0 0% 98%",
			muted: "0 0% 20%",
			"muted-foreground": "0 0% 65%",
			popover: "0 0% 10%",
			"popover-foreground": "0 0% 98%",
			border: "0 0% 20%",
			input: "0 0% 20%",
			primary: "0 0% 98%",
			"primary-foreground": "0 0% 10%",
			secondary: "0 0% 20%",
			"secondary-foreground": "0 0% 98%",
			accent: "0 0% 20%",
			"accent-foreground": "0 0% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "0 0% 98%",
			ring: "0 0% 65%",
		},
	},

	// Colored themes
	red: {
		light: {
			background: "0 0% 100%",
			foreground: "0 0% 3.9%",
			muted: "0 84.2% 95.9%",
			"muted-foreground": "0 0% 45%",
			popover: "0 0% 100%",
			"popover-foreground": "0 0% 3.9%",
			border: "0 84.2% 90%",
			input: "0 84.2% 90%",
			primary: "0 84.2% 60.2%",
			"primary-foreground": "0 0% 98%",
			secondary: "0 84.2% 95.9%",
			"secondary-foreground": "0 84.2% 60.2%",
			accent: "0 84.2% 95.9%",
			"accent-foreground": "0 84.2% 60.2%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "0 0% 98%",
			ring: "0 84.2% 60.2%",
		},
		dark: {
			background: "0 0% 3.9%",
			foreground: "0 0% 98%",
			muted: "0 62.8% 30.6%",
			"muted-foreground": "0 0% 63.9%",
			popover: "0 0% 3.9%",
			"popover-foreground": "0 0% 98%",
			border: "0 62.8% 30.6%",
			input: "0 62.8% 30.6%",
			primary: "0 84.2% 60.2%",
			"primary-foreground": "0 0% 98%",
			secondary: "0 62.8% 30.6%",
			"secondary-foreground": "0 0% 98%",
			accent: "0 62.8% 30.6%",
			"accent-foreground": "0 0% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "0 0% 98%",
			ring: "0 84.2% 60.2%",
		},
	},

	rose: {
		light: {
			background: "0 0% 100%",
			foreground: "240 10% 3.9%",
			muted: "346 87% 95.9%",
			"muted-foreground": "240 3.8% 46.1%",
			popover: "0 0% 100%",
			"popover-foreground": "240 10% 3.9%",
			border: "346 87% 90%",
			input: "346 87% 90%",
			primary: "346 87% 60.2%",
			"primary-foreground": "0 0% 98%",
			secondary: "346 87% 95.9%",
			"secondary-foreground": "346 87% 60.2%",
			accent: "346 87% 95.9%",
			"accent-foreground": "346 87% 60.2%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "0 0% 98%",
			ring: "346 87% 60.2%",
		},
		dark: {
			background: "240 10% 3.9%",
			foreground: "0 0% 98%",
			muted: "346 50% 30.6%",
			"muted-foreground": "240 5% 64.9%",
			popover: "240 10% 3.9%",
			"popover-foreground": "0 0% 98%",
			border: "346 50% 30.6%",
			input: "346 50% 30.6%",
			primary: "346 87% 60.2%",
			"primary-foreground": "0 0% 98%",
			secondary: "346 50% 30.6%",
			"secondary-foreground": "0 0% 98%",
			accent: "346 50% 30.6%",
			"accent-foreground": "0 0% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "0 0% 98%",
			ring: "346 87% 60.2%",
		},
	},

	blue: {
		light: {
			background: "0 0% 100%",
			foreground: "222 47% 11%",
			muted: "214 32% 91%",
			"muted-foreground": "215 20% 65%",
			popover: "0 0% 100%",
			"popover-foreground": "222 47% 11%",
			border: "214 32% 91%",
			input: "214 32% 91%",
			primary: "221 83% 53%",
			"primary-foreground": "210 40% 98%",
			secondary: "210 40% 96%",
			"secondary-foreground": "222 47% 11%",
			accent: "210 40% 96%",
			"accent-foreground": "222 47% 11%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "210 40% 98%",
			ring: "221 83% 53%",
		},
		dark: {
			background: "222 47% 11%",
			foreground: "210 40% 98%",
			muted: "217 32% 17%",
			"muted-foreground": "215 20% 65%",
			popover: "222 47% 11%",
			"popover-foreground": "210 40% 98%",
			border: "217 32% 17%",
			input: "217 32% 17%",
			primary: "217 91% 60%",
			"primary-foreground": "222 47% 11%",
			secondary: "217 32% 17%",
			"secondary-foreground": "210 40% 98%",
			accent: "217 32% 17%",
			"accent-foreground": "210 40% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "210 40% 98%",
			ring: "224 76% 48%",
		},
	},

	green: {
		light: {
			background: "0 0% 100%",
			foreground: "240 10% 3.9%",
			muted: "142 72% 95.9%",
			"muted-foreground": "240 3.8% 46.1%",
			popover: "0 0% 100%",
			"popover-foreground": "240 10% 3.9%",
			border: "142 72% 90%",
			input: "142 72% 90%",
			primary: "142 72% 29%",
			"primary-foreground": "0 0% 98%",
			secondary: "142 72% 95.9%",
			"secondary-foreground": "142 72% 29%",
			accent: "142 72% 95.9%",
			"accent-foreground": "142 72% 29%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "0 0% 98%",
			ring: "142 72% 29%",
		},
		dark: {
			background: "240 10% 3.9%",
			foreground: "0 0% 98%",
			muted: "142 50% 15%",
			"muted-foreground": "240 5% 64.9%",
			popover: "240 10% 3.9%",
			"popover-foreground": "0 0% 98%",
			border: "142 50% 15%",
			input: "142 50% 15%",
			primary: "142 72% 29%",
			"primary-foreground": "0 0% 98%",
			secondary: "142 50% 15%",
			"secondary-foreground": "0 0% 98%",
			accent: "142 50% 15%",
			"accent-foreground": "0 0% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "0 0% 98%",
			ring: "142 72% 29%",
		},
	},

	orange: {
		light: {
			background: "0 0% 100%",
			foreground: "20 14.3% 4.1%",
			muted: "24 95% 95.9%",
			"muted-foreground": "20 14.3% 46.1%",
			popover: "0 0% 100%",
			"popover-foreground": "20 14.3% 4.1%",
			border: "24 95% 90%",
			input: "24 95% 90%",
			primary: "24 95% 53%",
			"primary-foreground": "60 9.1% 97.8%",
			secondary: "24 95% 95.9%",
			"secondary-foreground": "24 95% 53%",
			accent: "24 95% 95.9%",
			"accent-foreground": "24 95% 53%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "60 9.1% 97.8%",
			ring: "24 95% 53%",
		},
		dark: {
			background: "20 14.3% 4.1%",
			foreground: "60 9.1% 97.8%",
			muted: "24 95% 15%",
			"muted-foreground": "20 14.3% 65%",
			popover: "20 14.3% 4.1%",
			"popover-foreground": "60 9.1% 97.8%",
			border: "24 95% 15%",
			input: "24 95% 15%",
			primary: "24 95% 53%",
			"primary-foreground": "60 9.1% 97.8%",
			secondary: "24 95% 15%",
			"secondary-foreground": "60 9.1% 97.8%",
			accent: "24 95% 15%",
			"accent-foreground": "60 9.1% 97.8%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "60 9.1% 97.8%",
			ring: "24 95% 53%",
		},
	},

	yellow: {
		light: {
			background: "0 0% 100%",
			foreground: "20 14.3% 4.1%",
			muted: "60 94% 95.9%",
			"muted-foreground": "20 14.3% 46.1%",
			popover: "0 0% 100%",
			"popover-foreground": "20 14.3% 4.1%",
			border: "60 94% 90%",
			input: "60 94% 90%",
			primary: "47.9 95.8% 53.1%",
			"primary-foreground": "26 83.3% 14.1%",
			secondary: "60 94% 95.9%",
			"secondary-foreground": "47.9 95.8% 53.1%",
			accent: "60 94% 95.9%",
			"accent-foreground": "47.9 95.8% 53.1%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "60 9.1% 97.8%",
			ring: "47.9 95.8% 53.1%",
		},
		dark: {
			background: "20 14.3% 4.1%",
			foreground: "60 9.1% 97.8%",
			muted: "47.9 95.8% 15%",
			"muted-foreground": "20 14.3% 65%",
			popover: "20 14.3% 4.1%",
			"popover-foreground": "60 9.1% 97.8%",
			border: "47.9 95.8% 15%",
			input: "47.9 95.8% 15%",
			primary: "47.9 95.8% 53.1%",
			"primary-foreground": "26 83.3% 14.1%",
			secondary: "47.9 95.8% 15%",
			"secondary-foreground": "60 9.1% 97.8%",
			accent: "47.9 95.8% 15%",
			"accent-foreground": "60 9.1% 97.8%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "60 9.1% 97.8%",
			ring: "47.9 95.8% 53.1%",
		},
	},

	violet: {
		light: {
			background: "0 0% 100%",
			foreground: "224 71.4% 4.1%",
			muted: "250 95% 95.9%",
			"muted-foreground": "220 8.9% 46.1%",
			popover: "0 0% 100%",
			"popover-foreground": "224 71.4% 4.1%",
			border: "250 95% 90%",
			input: "250 95% 90%",
			primary: "250 95% 50%",
			"primary-foreground": "0 0% 100%",
			secondary: "250 95% 95.9%",
			"secondary-foreground": "250 95% 50%",
			accent: "250 95% 95.9%",
			"accent-foreground": "250 95% 50%",
			destructive: "0 84.2% 60.2%",
			"destructive-foreground": "0 0% 98%",
			ring: "250 95% 50%",
		},
		dark: {
			background: "224 71.4% 4.1%",
			foreground: "210 20% 98%",
			muted: "250 50% 15%",
			"muted-foreground": "220 8.9% 65%",
			popover: "224 71.4% 4.1%",
			"popover-foreground": "210 20% 98%",
			border: "250 50% 15%",
			input: "250 50% 15%",
			primary: "250 95% 50%",
			"primary-foreground": "0 0% 100%",
			secondary: "250 50% 15%",
			"secondary-foreground": "210 20% 98%",
			accent: "250 50% 15%",
			"accent-foreground": "210 20% 98%",
			destructive: "0 62.8% 30.6%",
			"destructive-foreground": "0 0% 100%",
			ring: "250 95% 50%",
		},
	},
} as const;
